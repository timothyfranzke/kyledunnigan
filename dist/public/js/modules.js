var kdApp=angular.module("kdApp",["ui.router"]);kdApp.config(function($provide){$provide.decorator("$uiViewScroll",function($delegate){return function(uiViewElement){}})}),kdApp.config(function($urlRouterProvider,$stateProvider,$locationProvider){$stateProvider.state("home",{url:"/",templateUrl:"app/home/home.html",controller:"homeController"}).state("bio",{url:"/bio",templateUrl:"app/bio/bio.html"}).state("contact",{url:"/contact",templateUrl:"app/contact/contact.html"}).state("listen",{url:"/listen",templateUrl:"app/listen/listen.html"}).state("live",{url:"/live",templateUrl:"app/live/live.html",controller:"liveController"}).state("youtube",{url:"/watch",templateUrl:"app/watch/watch.html"}),$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0)}),kdApp.controller("homeController",function($scope,eventService){$scope.events=[],eventService.GET().then(function(data){console.log(data),$scope.events=data})}),kdApp.controller("liveController",function($scope,eventService){$scope.events=[],eventService.GET().then(function(data){console.log(data),$scope.events=data})}),kdApp.factory("baseService",function($http,$q){var MakeRequest=function(request){var defer=$q.defer();return $http(request).then(function(data){defer.resolve(data)},function(response){defer.reject(response)}),defer.promise};return{GET:function(url,query){return MakeRequest({url:url+query,method:"GET"})},POST:function(url,bodyData){return MakeRequest({url:url,method:"POST",data:bodyData})},PUT:function(url,id,bodyData){return MakeRequest({url:url+"/"+id,method:"PUT",data:bodyData})},DELETE:function(url,id){return MakeRequest({url:url+"/"+id,method:"DELETE"})}}}),kdApp.factory("eventService",function(baseService,$q){var defer=$q.defer(),events=[];return{GET:function(){return 0==events.length?baseService.GET("configuration/events.json","").then(function(res){res.data.forEach(function(event){event.date=new Date(event.date),event.date>=new Date&&events.push(event)}),defer.resolve(events)}):defer.resolve(events),defer.promise}}});